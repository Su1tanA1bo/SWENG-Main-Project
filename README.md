# SWENG-Main-Project

Trello Board 
https://trello.com/invite/b/JzYBrrIW/ATTI9d8d7bbfa462b537c084dbc08148842b2CD9369B/sweng3main

## Running the app locally
### (Recommended) Run a virtual environment
It is recommended that you do all development with python inside of a virtual environment. 
Due to the large amount of packages and installs needed by this project, a virtual environment prevents any issues of overlapping dependencies from occuring.
As long as you have python installed, you should also have the ability to start a virtual environment. The commands for that are as follows:
* Create a virtual environment:
	`python -m venv venv`
* Activate your new virtual environment (Windows)
	`venv\Scripts\activate`
* Activate your new virtual environment (Not Windows)
	`source venv/bin/activate`
### Install all requirements
Before you can run the app, you must make sure that all required libraries are also installed in your environment. To do this, make sure that you have pulled the file "requirements.txt", and in the same directory as it, run the command:
    `pip install -r requirements.txt`
As you work on the project, you may find yourself adding additional installs. To add these to "requirements.txt", run the command:
    `pip freeze > requirements.txt`

### Starting the app
Once all requirements are installed, to start the application run the command:
    `flask run`
If you are not using the library flask-dotenv, and/or do not have a the file ".flaskenv", you also need to run the commands telling flask to import the webapp. These are
* Tell Flask how to import the webapp (Windows)
	`set FLASK_APP=webapp.py`
* Tell Flask how to import the webapp (Not Windows)
	`export FLASK_APP=webapp.py`

### Running Flask as a shell locally
If you want to run flask as a shell locally, with all imports handled, run the following command: `flask shell`

## Using the Database
During the course of the project, new items or relations between items will need to be added to the database. To do this, after adding an object to "models.py", run one of the following commands.
* Create the migration repository for the webapp. You only need to run this if no database has been created yet.
	`flask db init`
* Generate migration script for changes to database. Run this after any update to the database structure.
	`flask db migrate -m [changes name as string]`
	for example: `flask db migrate -m "users table"`
* Apply changes generated by migration script. Run after generating said migration script with the command above.
	`flask db upgrade`
* Undo the latest database migration (useful during development if database migration creates errors)
	`flask db downgrade`

## Localisation and Internationalisation

### Marking text for translation within code
Part of the functioality of the webapp is that it can include translations of text. To mark text that is within the code, and needs translation, put the text in a "_()". An example of a code block from "app/main/models.py" showing this is below.
``` python
from flask_babel import _
...
submit = SubmitField(_l('Submit'))
```

### Translation commands
The following commands are defined within "main/cli.py" and are useable to provide translation functionality and the ability to quickly and easily update the .po and .pot files within the project.
* Add a new language to the project
	`flask translate init [LANG]`
* Update all language repositiries
	`flask translate update`
* Compile all language repositories
	`flask translate compile`
